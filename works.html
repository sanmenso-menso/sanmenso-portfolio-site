<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WORKS | SANMENSO</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@700;800&family=Zen+Kaku+Gothic+New:wght@700;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Zen Kaku Gothic New"', 'sans-serif'],
                        serif: ['"Shippori Mincho"', 'serif'],
                    },
                    colors: {
                        bgGreen: '#2E8B57',
                        accentGold: '#FFD700',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: "Zen Kaku Gothic New", sans-serif;
            background-color: #2E8B57;
            color: black;
            overflow-x: hidden;
        }
        
        ::selection {
            background-color: black;
            color: #FFD700;
        }

        /* カスタムスクロールバー (モーダル用) */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #000; 
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555; 
        }

        /* ノイズテクスチャ */
        .noise-bg {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
        }
    </style>
</head>
<body class="min-h-screen w-full relative">

    <div class="fixed inset-0 opacity-10 pointer-events-none mix-blend-multiply z-0 noise-bg"></div>

    <div id="bg-shapes" class="fixed inset-0 pointer-events-none overflow-hidden z-0">
        </div>

    <div class="relative z-10 max-w-7xl mx-auto px-6 py-8 min-h-screen flex flex-col">
        
        <header class="mb-12 flex flex-col md:flex-row justify-between items-start md:items-end gap-8 border-b-4 border-black pb-6 border-double">
            <div class="flex flex-col gap-6">
                   <a href="index.html">
                <button class="px-6 py-2 bg-white border-2 border-black font-bold hover:bg-black hover:text-[#FFD700] transition-colors shadow-[4px_4px_0px_#000] active:translate-x-1 active:translate-y-1 active:shadow-none">
                    ← BACK TO HOME
                </button>
            </a>

                <div>
                    <h2 class="text-6xl md:text-8xl font-black tracking-tighter leading-none mix-blend-hard-light text-[#FFD700] drop-shadow-[4px_4px_0px_rgba(0,0,0,1)]" style="-webkit-text-stroke: 2px black;">
                        WORKS
                    </h2>
                    <p class="font-mono font-bold text-black text-lg md:text-xl tracking-wide mt-2">
                        <span class="bg-black text-[#FFD700] px-2 py-1">IMAMADENO ARCHIVE</span> 2022 - 2025
                    </p>
                </div>
            </div>
            
            <div class="flex flex-col items-end gap-4 w-full md:w-auto">

                <div class="flex gap-2 flex-wrap justify-end" id="filter-buttons">
                    </div>
            </div>
        </header>

        <main class="flex-grow pb-20">
            <div id="works-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                </div>
            <div id="no-works-msg" class="hidden text-center py-20 font-serif text-2xl opacity-50">
                No works found in this category.
            </div>
        </main>

    </div>

    <div id="work-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 md:p-8 animate-in fade-in duration-200">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeModal()"></div>
        
        <div class="relative w-full max-w-5xl h-[90vh] bg-[#f0f0f0] border-[6px] border-black shadow-[16px_16px_0px_#000] flex flex-col md:flex-row overflow-hidden animate-in zoom-in-95 slide-in-from-bottom-4 duration-300">
            
            <button onclick="closeModal()" class="absolute top-0 right-0 z-20 bg-black text-white p-3 hover:bg-[#FFD700] hover:text-black transition-colors">
                <i data-lucide="x" class="w-8 h-8"></i>
            </button>

            <div class="w-full md:w-2/5 bg-gray-200 border-b-4 md:border-b-0 md:border-r-4 border-black relative overflow-hidden group">
                <div id="modal-bg-color" class="absolute inset-0 opacity-20"></div>
                <div id="modal-icon-container" class="absolute inset-0 flex items-center justify-center pointer-events-none opacity-50">
                    </div>
                
                <div class="absolute bottom-4 left-4 bg-white border-2 border-black px-3 py-1 font-mono text-sm shadow-[4px_4px_0px_#000]">
                    ID: <span id="modal-id">000</span>
                </div>
                
                <div class="absolute inset-0 opacity-30 mix-blend-multiply pointer-events-none noise-bg"></div>
            </div>

            <div class="w-full md:w-3/5 overflow-y-auto custom-scrollbar bg-white">
                <div class="p-8 md:p-12 flex flex-col gap-8">
                    
                    <div>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="flex items-center gap-1 font-mono text-sm border border-black px-2 py-0.5 bg-yellow-300">
                                <i data-lucide="tag" class="w-3 h-3"></i> <span id="modal-type">TYPE</span>
                            </span>
                            <span class="flex items-center gap-1 font-mono text-sm border border-black px-2 py-0.5 bg-white">
                                <i data-lucide="calendar" class="w-3 h-3"></i> <span id="modal-year">YEAR</span>
                            </span>
                            <span class="flex items-center gap-1 font-mono text-sm border border-black px-2 py-0.5 bg-white">
                                <i data-lucide="user" class="w-3 h-3"></i> <span id="modal-role">ROLE</span>
                            </span>
                        </div>
                        <h2 id="modal-title" class="text-5xl md:text-7xl font-black tracking-tighter leading-none mb-4">TITLE</h2>
                        <div class="h-1 w-24 bg-black"></div>
                    </div>

                    <div id="modal-detail" class="font-serif text-lg leading-loose text-gray-800 whitespace-pre-line">
                        DETAIL TEXT
                    </div>

                    <div id="modal-credits-section" class="bg-gray-100 p-6 border-2 border-black/20 mt-4 hidden">
                        <h4 class="font-bold border-b border-black/20 pb-2 mb-3">CREDITS</h4>
                        <ul id="modal-credits-list" class="space-y-1 font-mono text-sm">
                            </ul>
                    </div>

                    <div class="pt-8 mt-auto">
                        <button id="modal-launch-btn" class="w-full bg-black text-white font-bold py-4 text-xl flex items-center justify-center gap-2 border-2 border-black shadow-[8px_8px_0px_#FFD700] hover:translate-y-1 hover:shadow-none hover:bg-gray-900 transition-all">
                            LAUNCH PROJECT <i data-lucide="external-link" class="w-5 h-5"></i>
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const WORKS_DATA = [
            { 
                id: 1, 
                title: "ButterflyEffectCity/可不", 
                type: "music", 
                year: "2022", 
                role: "Composition", 
                image: "butteerflyeffectCity.jpg",
                desc: "活動者としての一歩目となる楽曲", 
                detailText: "ボカロPとしての一作目となる楽曲です。バタフライエフェクトというワードから連想し、一曲を仕上げました。",
                credits: ["Composition: Sanmenso", "illustration:らふぁえるsk"],
                color: "#FFD700" ,
                url: "https://youtu.be/TYKBm1GsSmA",
            },
            { 
                id: 2, 
                title: "ナイト・アモーレ/星界", 
                type: "music", 
                year: "2022", 
                role: "Composition", 
                image: "nightamore.jpg",
                desc: "失恋した男に惚れている女性をテーマにした楽曲。", 
                detailText: "星界楽曲コンテストへの参加曲として制作しました。昭和歌謡の雰囲気をゴリゴリに醸し出すという方向性で制作を進めました。",
                credits: ["Composition", "illustration:櫛米"],
                color: "#FF6B6B" ,
                url: "https://youtu.be/yupa62YiQFg",
            },
            { 
                id: 3, 
                title: "産声/可不・星界", 
                type: "music", 
                year: "2022", 
                role: "Composition", 
                image: "ubugoe.jpg",
                desc: "民族的な要素を意識したデュエット曲", 
                detailText: "星界楽曲コンテストへの参加曲として制作しました。デュエットソングに挑戦してみようと思い、今までよりアコースティックな仕上がりを意識しました。",
                credits: ["Composition"],
                color: "#4ECDC4" ,
                url: "https://youtu.be/UOYN5jK454U",
            },
            { 
                id: 4, 
                title: "Noise_Garden", 
                type: "music", 
                year: "2023", 
                role: "Sound Design", 
                desc: "植物の生体電位をMIDIに変換して生成されたアンビエント。", 
                detailText: "植物の葉に取り付けた電極から微弱な生体電位を取得し、それをMIDI信号に変換してシンセサイザーを鳴らすインスタレーション作品です。植物の種類や周囲の環境（光、湿度、人の接近）によって音色が変化します。\n\nこの作品は「自然との対話」をデジタル技術を通じて再構築する試みであり、展示会場では来場者が植物に触れることで音が激変する様子を楽しめました。",
                credits: ["Sound: Sanmenso", "Tech Support: Lab X"],
                color: "#FFD700" 
            },
            { 
                id: 5, 
                title: "Brutalist_Corp", 
                type: "entame", 
                year: "2023", 
                role: "Web Design", 
                desc: "架空の企業のコーポレートサイト。極太の境界線と原色を使用。", 
                detailText: "実在しない架空の企業「Brutalist Corp」のためのコーポレートサイトデザイン。近年のWebデザインのトレンドである「クリーンでミニマル」な方向性へのアンチテーゼとして、原色、極太の境界線、システムフォントを多用したブルータリズムスタイルを採用しました。\n\nユーザビリティをギリギリまで削ぎ落としつつ、それでもサイトとして機能する境界線を探る実験的なプロジェクトです。",
                credits: ["Design: Sanmenso"],
                color: "#FF6B6B" 
            },
            { 
                id: 6, 
                title: "Glitch_Text", 
                type: "fun", 
                year: "2022", 
                role: "Art Direction", 
                desc: "文字化けを美学として捉え直すタイポグラフィ実験。", 
                detailText: "本来はエラーである「文字化け」を、意図的なグラフィック要素として扱うタイポグラフィの実験シリーズ。UTF-8とShift_JISの変換ミスによって生じる独特の記号の羅列をパターン化し、ポスターやTシャツのデザインに展開しました。",
                credits: ["AD: Sanmenso", "Photo: Studio Y"],
                color: "#4ECDC4" 
            },
        ];

        const CATEGORIES = [
            { id: 'all', label: 'ALL', icon: null },
            { id: 'music', label: 'MUSIC', icon: 'triangle' },
            { id: 'entame', label: 'ENTAME', icon: 'circle' },
            { id: 'fun', label: 'FUN', icon: 'square' },
        ];

        let currentFilter = 'all';

        // --- INITIALIZATION ---
        window.addEventListener('load', () => {
            initBackgroundShapes();
            renderFilterButtons();
            renderWorks();
            lucide.createIcons();
        });

        // --- FILTER & RENDER LOGIC ---
        function renderFilterButtons() {
            const container = document.getElementById('filter-buttons');
            container.innerHTML = '';

            CATEGORIES.forEach(cat => {
                const btn = document.createElement('button');
                const isActive = currentFilter === cat.id;
                
                let iconHtml = '';
                if(cat.id === 'all') iconHtml = '<div class="font-black text-xl">ALL</div>';
                else iconHtml = `<i data-lucide="${cat.icon}" class="w-5 h-5 fill-current"></i>`;

                btn.className = `h-12 px-4 flex items-center justify-center gap-2 border-2 border-black transition-all shadow-[4px_4px_0px_#000] hover:-translate-y-1 hover:shadow-[6px_6px_0px_#000] active:translate-y-0 active:shadow-none font-bold
                    ${isActive ? 'bg-black text-[#FFD700]' : 'bg-white text-black hover:bg-yellow-100'}`;
                
                btn.innerHTML = `${iconHtml}<span class="hidden md:inline">${cat.label}</span>`;
                btn.onclick = () => {
                    currentFilter = cat.id;
                    renderFilterButtons(); // Re-render buttons to update active state
                    renderWorks();
                    lucide.createIcons(); // Refresh icons
                };

                container.appendChild(btn);
            });
        }

        function renderWorks() {
            const container = document.getElementById('works-grid');
            const noMsg = document.getElementById('no-works-msg');
            container.innerHTML = '';

            let filtered = currentFilter === 'all' 
                ? [...WORKS_DATA] // 安全のためコピーを作成
                : WORKS_DATA.filter(w => w.type === currentFilter);

            //IDが大きい順（降順）に並び替える
            filtered.sort((a, b) => b.id - a.id);

            if(filtered.length === 0) {
                noMsg.classList.remove('hidden');
            } else {
                noMsg.classList.add('hidden');
            }

            filtered.forEach((work, index) => {
                // Card HTML Construction
                const card = document.createElement('div');
                card.className = "animate-in fade-in slide-in-from-bottom-8 duration-700 fill-mode-backwards";
                card.style.animationDelay = `${(index + 1) * 100}ms`;

                // アイコンの選択
                let visualHtml = '';

                if (work.image) {
                    // 画像がある場合：画像を表示 (白黒にして、ホバーでカラーにする演出付き)
                    visualHtml = `<img src="${work.image}" class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500">`;
                } else {
                    // 画像がない場合：従来のアイコンを表示
                    let iconSvg = '';
                    if(work.type === 'music') iconSvg = '<i data-lucide="triangle" class="w-20 h-20 stroke-1"></i>';
                    else if(work.type === 'entame') iconSvg = '<i data-lucide="circle" class="w-20 h-20 stroke-1"></i>';
                    else if(work.type === 'fun') iconSvg = '<i data-lucide="square" class="w-20 h-20 stroke-1 rotate-12"></i>';
                    
                    visualHtml = `
                        <div class="absolute inset-0 opacity-20" style="background-color: ${work.color}"></div>
                        <div class="absolute inset-0 flex items-center justify-center opacity-50 text-black">
                            ${iconSvg}
                        </div>
                    `;
                }

                card.innerHTML = `
                  <div class="group relative bg-white border-4 border-black p-4 h-full flex flex-col transition-all duration-300 hover:-translate-y-2 hover:rotate-1 hover:shadow-[12px_12px_0px_#000] shadow-[6px_6px_0px_#000] cursor-pointer overflow-hidden" onclick="openModal(${work.id})">
                    <div class="absolute -top-3 left-1/2 -translate-x-1/2 w-24 h-6 bg-yellow-400/80 rotate-[-2deg] opacity-80 shadow-sm z-10"></div>
                    
                    <div class="w-full aspect-video border-2 border-black mb-4 bg-gray-100 relative overflow-hidden">
                      ${visualHtml}
                      <div class="absolute inset-0 opacity-10 mix-blend-multiply noise-bg pointer-events-none"></div>
                    </div>

                    <div class="flex justify-between items-start mb-2 border-b-2 border-black pb-2 border-dashed">
                      <h3 class="text-2xl font-black tracking-tight leading-none">${work.title}</h3>
                      <span class="font-mono text-xs bg-black text-white px-1 py-0.5 transform rotate-3">${work.year}</span>
                    </div>
                    
                    <div class="flex items-center gap-2 mb-3">
                      <span class="text-xs font-bold border border-black rounded-full px-2 py-0.5 bg-yellow-300">${work.type.toUpperCase()}</span>
                      <span class="text-xs font-mono opacity-60">${work.role}</span>
                    </div>

                    <p class="text-sm font-medium leading-snug opacity-80 line-clamp-3 mb-4 flex-grow">
                      ${work.desc}
                    </p>

                    <div class="flex justify-end mt-auto">
                        <div class="flex items-center gap-1 font-bold text-sm border-b-2 border-transparent group-hover:border-black transition-all">
                            READ MORE <i data-lucide="arrow-up-right" class="w-4 h-4"></i>
                        </div>
                    </div>
                  </div>
                `;
                container.appendChild(card);
            });
            lucide.createIcons(); // 新しく追加された要素のアイコンを描画
        }

        // --- MODAL LOGIC ---
        function openModal(id) {
            const work = WORKS_DATA.find(w => w.id === id);
            if(!work) return;

            const modal = document.getElementById('work-modal');
            
            // Populate Data
            document.getElementById('modal-id').innerText = work.id.toString().padStart(3, '0');
            document.getElementById('modal-type').innerText = work.type.toUpperCase();
            document.getElementById('modal-year').innerText = work.year;
            document.getElementById('modal-role').innerText = work.role;
            document.getElementById('modal-title').innerText = work.title;
            document.getElementById('modal-detail').innerText = work.detailText || work.desc;
            document.getElementById('modal-bg-color').style.backgroundColor = work.color;

            // Credits
            const creditSection = document.getElementById('modal-credits-section');
            const creditList = document.getElementById('modal-credits-list');
            const launchBtn = document.getElementById('modal-launch-btn');
            creditList.innerHTML = '';
            if(work.credits && work.credits.length > 0) {
                work.credits.forEach(c => {
                    const li = document.createElement('li');
                    li.innerText = `- ${c}`;
                    creditList.appendChild(li);
                });
                creditSection.classList.remove('hidden');
            } else {
                creditSection.classList.add('hidden');
            }

            // CRICK URL
            if (work.url) {
                // URLがある場合：ボタンを表示し、クリックで新しいタブを開く
                launchBtn.style.display = 'flex';
                launchBtn.onclick = () => window.open(work.url, '_blank');
            } else {
                // URLがない場合：ボタンを隠す（またはクリックできないようにする）
                launchBtn.style.display = 'none';
            }

            // Big Icon
            const iconContainer = document.getElementById('modal-icon-container');

            if (work.image) {
                // 画像がある場合：
                // 元々の opacity-50 などのクラスを一時的に消して、画像をくっきり表示させる
                iconContainer.className = "absolute inset-0 z-10 overflow-hidden"; 
                
                // 画像タグを注入 (ホバーでカラー化 & 拡大)
                iconContainer.innerHTML = `
                    <img src="${work.image}" 
                         class="w-full h-full object-cover grayscale transition-all duration-700 ease-out group-hover:grayscale-0 group-hover:scale-105"
                         alt="${work.title}">
                `;
            } else {
                // 画像がない場合：
                // 元々のクラス（薄く表示、中央揃え）に戻す
                iconContainer.className = "absolute inset-0 flex items-center justify-center pointer-events-none opacity-50";

                // 従来の図形アイコンを表示
                if(work.type === 'music') iconContainer.innerHTML = '<i data-lucide="triangle" class="w-48 h-48 stroke-1 opacity-50"></i>';
                else if(work.type === 'entame') iconContainer.innerHTML = '<i data-lucide="circle" class="w-48 h-48 stroke-1 opacity-50"></i>';
                else if(work.type === 'fun') iconContainer.innerHTML = '<i data-lucide="square" class="w-48 h-48 stroke-1 opacity-50"></i>';
            }
            
            lucide.createIcons(); // モーダル内のアイコン更新

            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeModal() {
            const modal = document.getElementById('work-modal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        // --- BACKGROUND SHAPES LOGIC ---
        function initBackgroundShapes() {
            const container = document.getElementById('bg-shapes');
            const shapes = [];

            for(let i=0; i<6; i++) {
                const div = document.createElement('div');
                div.className = "absolute border-2 border-black/10 opacity-40 transition-transform duration-1000 ease-out mix-blend-overlay";
                
                div.style.top = `${(i * 15) + 5}%`;
                div.style.left = `${(i * 20) % 100}%`;
                div.style.width = `${(i * 30) + 80}px`;
                div.style.height = `${(i * 30) + 80}px`;
                div.style.borderRadius = i % 3 === 0 ? '50%' : '0%';
                
                container.appendChild(div);
                shapes.push(div);
            }

            window.addEventListener('mousemove', (e) => {
                const x = e.clientX;
                const y = e.clientY;

                shapes.forEach((shape, i) => {
                    const moveX = x * (i + 1) * 0.01;
                    const moveY = y * (i + 1) * 0.01;
                    const rotate = x * 0.02;
                    shape.style.transform = `translate(${moveX}px, ${moveY}px) rotate(${rotate}deg)`;
                });
            });
        }
    </script>
</body>
</html>